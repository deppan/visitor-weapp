<view class="flex;flex-col" hidden="{{loading}}">
  <van-cell-group>
    <van-field id="username" clearable value="{{ username }}" required label="姓名" placeholder="请输入姓名" bind:change="onTextChange" />

    <van-field id="mobile" clearable value="{{ mobile }}" required label="手机号" type="phone" placeholder="请输入手机号" bind:change="onTextChange" />

    <van-field id="identity_card" clearable value="{{ identityCard }}" required label="身份证号" placeholder="请输入身份证号" bind:change="onTextChange" />

    <van-field value="{{ visitTime }}" required is-link readonly label="到访时间" placeholder="点击选择到访时间" bind:click-input="showPopup" />

    <van-field value="{{ campus }}" required is-link readonly label="校区" placeholder="点击选择校区" bind:click-input="showCampus" />

    <van-field value="{{ staff }}" required is-link readonly label="教工" disabled="{{campus.length==0}}" placeholder="点击选择教工" bind:click-input="showStaff" />

    <van-field id="health_code" required label="健康码">
      <van-uploader slot="input" name="healthCode" file-list="{{ healthCode }}" bind:oversize="oversize" bind:delete="delete" bind:after-read="afterRead" deletable="{{ true }}" max-count="1" max-size="{{2000 * 1024}}" />
    </van-field>

    <van-field id="trip_code" required label="行程码">
      <van-uploader slot="input" name="tripCode" file-list="{{tripCode}}" bind:oversize="oversize" bind:delete="delete" bind:after-read="afterRead" deletable="{{ true }}" max-count="1" max-size="{{2000 * 1024}}" />
    </van-field>

    <van-field id="license_plate" clearable value="{{ licensePlate }}" label="车牌号码" placeholder="请输入车牌号码" bind:change="onTextChange" />

    <van-field id="remark" autosize clearable value="{{ remark }}" label="备注" placeholder="请输入备注" type="textarea" maxlength="64" bind:change="onTextChange" />
  </van-cell-group>

  <van-calendar type="single" position="bottom" show="{{ showVisitPicker }}" bind:close="onClose" bind:confirm="onConfirm" />

  <van-popup show="{{ campusPicker }}" round position="bottom">
    <van-picker show-toolbar columns="{{ campuses }}" bind:confirm="onCampusConfirm" bind:cancel="onClose" value-key="name" />
  </van-popup>

  <van-popup show="{{ staffPicker }}" round position="bottom">
    <van-picker show-toolbar columns="{{ departments }}" bind:change="onStaffChange" bind:confirm="onStaffConfirm" bind:cancel="onClose" value-key="name" />
  </van-popup>

  <van-button type="primary" style="margin: 20rpx 0;" class="flex" bind:click="onSubmit">提交</van-button>
</view>